<!DOCTYPE html>
<html class="uk-background-secondary">
    <head>
        <title>tiktok downloader</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <style>
             <%- css %>
        </style>
        <script type="text/javascript">
            <%- js1 %>
        </script>
        <script type="text/javascript">
            <%- js2 %>
        </script>
        <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.10.0/dist/sweetalert2.all.min.js"></script>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11.10.0/dist/sweetalert2.min.css">
    </head>
    <body>
        <div class="uk-container uk-margin-small-top uk-container-large">
            <div class="uk-border-rounded uk-background-secondary uk-card uk-card-body uk-light">
                <div class="">
                    <h2 class="uk-text-center uk-text-bold">TIKTOK DOWNLOADER</h2>
                </div>
                <div class="uk-margin">
                    <input id="urls" class="uk-border-rounded uk-input" type="url" placeholder="masukan link vt tiktok" aria-label="Input" required>
                </div>
                <div>
                    <button onclick="send()" class="uk-border-rounded uk-button uk-button-default uk-width-1-1">download</button>
                </div>
                <div id="modal-center" class="uk-flex-top" uk-modal>
                 <div class="uk-modal-dialog uk-modal-body uk-margin-auto-vertical">
                  <button class="uk-modal-close-default" type="button" uk-close>close</button>
                    <h3>Apa yang baru?</h3>
                    <span>11-12-2023</span>
                    <p>1. penambahan notif alert dari https://sweetalert2.github.io</p>
                    <p>2. pengecilan hasil dari video dan menambahkan card di luar video</p>
                    <p>3. fix errror & add protect invalid url</p>
                 </div>
                </div>
                <div class="uk-width-1-3 uk-background-secondary uk-card uk-card-default uk-card-body uk-card-small uk-margin-top">
                    <p>error? report <a href="mailto:rickqsyaerick06@rickk.biz.id">here</a> <a href="#modal-center"> changelog</a></p>
                </div>
            </div>
        </div>
    </body>
    <script type="text/javascript">
        var x = document.getElementById("urls");
        function send() {
            let timerInterval
            Swal.fire({
                title: 'loading',
                html: 'harap tunggu!',
                timer: 10000,
                timerProgressBar: false,
                  didOpen: () => {
                    Swal.showLoading()
    const b = Swal.getHtmlContainer().querySelector('b')
    timerInterval = setInterval(() => {
      b.textContent = Swal.getTimerLeft()
    }, 100)
  },
  willClose: () => {
    clearInterval(timerInterval)
  }
}).then((result) => {
  /* Read more about handling dismissals below */
  if (result.dismiss === Swal.DismissReason.timer) {
    console.log('I was closed by the timer')
  }
})
            if (x.value == "") {
        let timerInterval
Swal.fire({
  title: 'error',
  html: 'harap masukan url',
  timer: 500,
  timerProgressBar: true,
  didOpen: () => {
    Swal.showLoading()
    const b = Swal.getHtmlContainer().querySelector('b')
    timerInterval = setInterval(() => {
      b.textContent = Swal.getTimerLeft()
    }, 100)
  },
  willClose: () => {
    clearInterval(timerInterval)
  }
}).then((result) => {
  /* Read more about handling dismissals below */
  if (result.dismiss === Swal.DismissReason.timer) {
    console.log('I was closed by the timer')
  }
})
        } else {
        window.location.href =`https://tiktok.cyclic.app/url?link=${x.value}`;
        }}

    </script>
</html>
